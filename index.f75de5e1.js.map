{"mappings":"AAAA;AAEA,IAAI,QAAQ;IACV;QAAC;QAAG;QAAG;QAAG;KAAE;IACZ;QAAC;QAAG;QAAG;QAAG;KAAE;IACZ;QAAC;QAAG;QAAG;QAAG;KAAE;IACZ;QAAC;QAAG;QAAG;QAAG;KAAE;CACb;AACD,MAAM,SAAS,SAAS,aAAa,CAAC;AACtC,MAAM,QAAQ,SAAS,aAAa,CAAC;AACrC,MAAM,cAAc,SAAS,aAAa,CAAC;AAC3C,MAAM,aAAa,SAAS,aAAa,CAAC;AAC1C,MAAM,eAAe,SAAS,aAAa,CAAC;AAC5C,MAAM,UAAU,SAAS,gBAAgB,CAAC;AAC1C,MAAM,WAAW,SAAS,gBAAgB,CAAC;AAC3C,MAAM,YAAY,SAAS,aAAa,CAAC;AACzC,MAAM,cAAc;AACpB,MAAM,QAAQ;AACd,IAAI,SAAS;AAEb,SAAS;IACP,QAAQ;QACN;YAAC;YAAG;YAAG;YAAG;SAAE;QACZ;YAAC;YAAG;YAAG;YAAG;SAAE;QACZ;YAAC;YAAG;YAAG;YAAG;SAAE;QACZ;YAAC;YAAG;YAAG;YAAG;SAAE;KACb;IACD;IACA;AACF;AAEA,SAAS;IACP,IAAK,IAAI,MAAM,GAAG,MAAM,OAAO,MAC7B,IAAK,IAAI,OAAO,GAAG,OAAO,OAAO,OAAQ;QACvC,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,KAAK,GACvB,OAAO;IAEX;IAGF,OAAO;AACT;AAEA,SAAS,YAAY,SAAS;IAC5B,OAAO,UAAU,MAAM,CAAC,CAAA,OAAQ,OAAO;AACzC;AAEA,MAAM,cAAc,CAAC,OAAO;IAC1B,MAAM,SAAS,GAAG,CAAC,YAAY,EAAE,IAAI,WAAW,CAAC;IAEjD,IAAI,QAAQ,GACV,MAAM,SAAS,GAAG;IAGpB,IAAI,MAAM,GACR,MAAM,SAAS,GAAG;IAGpB,IAAI,QAAQ,aACV,WAAW,SAAS,CAAC,MAAM,CAAC;AAEhC;AAEA,SAAS;IACP,IAAI,YAAY,OACd;IAGF,IAAI,gBAAgB;IAEpB,MAAO,kBAAkB,MAAO;QAC9B,MAAM,IAAI,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK;QACrC,MAAM,IAAI,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK;QAErC,IAAI,KAAK,CAAC,EAAE,CAAC,EAAE,KAAK,GAAG;YACrB,MAAM,QAAQ,OAAO,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE;YAEpC,IAAI,KAAK,MAAM,KAAK,KAAK;gBACvB,KAAK,CAAC,EAAE,CAAC,EAAE,GAAG;gBACd,YAAY,OAAO;YACrB,OAAO;gBACL,KAAK,CAAC,EAAE,CAAC,EAAE,GAAG;gBACd,YAAY,OAAO;YACrB;YAEA,gBAAgB;QAClB;IACF;AACF;AAEA,SAAS,WAAW,GAAG;IACrB,IAAI,MAAM,YAAY;IAEtB,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,MAAM,EAAE,IAC9B,IAAI,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,IAAI,EAAE,EAAE;QACzB,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,IAAI,EAAE;QACpB,GAAG,CAAC,IAAI,EAAE,GAAG;QACb,UAAU,GAAG,CAAC,EAAE;IAClB;IAGF,UAAU,SAAS,GAAG;IACtB,MAAM,YAAY;IAElB,MAAO,IAAI,MAAM,GAAG,MAClB,IAAI,IAAI,CAAC;IAGX,OAAO;AACT;AAEA,SAAS,OAAO,KAAK;IACnB,OAAO,MAAM,GAAG,CAAC,CAAC,OAAO,OAAS,MAAM,GAAG,CAAC,CAAA,MAAO,GAAG,CAAC,KAAK;AAC9D;AAEA,SAAS;IACP,MAAM,cAAc,OAAO;WAAI;KAAM;IAErC,IAAK,IAAI,MAAM,GAAG,MAAM,OAAO,MAC7B,IAAK,IAAI,OAAO,GAAG,OAAO,QAAQ,GAAG,OAAQ;QAC3C,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,KAAK,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,IAC1C,WAAW,CAAC,IAAI,CAAC,KAAK,KAAK,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,EACtD,OAAO;IAEX;IAGF,OAAO;AACT;AAEA,SAAS;IACP,IAAK,IAAI,MAAM,GAAG,MAAM,OAAO,MAAO;QACpC,MAAM,KAAK,KAAK,CAAC,IAAI,CAAC,OAAO;QAE7B,MAAM,gBAAgB,WAAW,IAAI,OAAO;QAE5C,IAAK,IAAI,OAAO,GAAG,OAAO,OAAO,OAAQ;YACvC,KAAK,CAAC,IAAI,GAAG;YAEb,MAAM,QAAQ,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK;YACzC,MAAM,SAAS,KAAK,CAAC,IAAI,CAAC,KAAK;YAE/B,YAAY,OAAO;QACrB;IACF;AACF;AAEA,SAAS;IACP,IAAK,IAAI,MAAM,GAAG,MAAM,OAAO,MAAO;QACpC,MAAM,KAAK,KAAK,CAAC,IAAI;QAErB,MAAM,gBAAgB,WAAW;QAEjC,IAAK,IAAI,OAAO,GAAG,OAAO,OAAO,OAAQ;YACvC,KAAK,CAAC,IAAI,GAAG;YAEb,MAAM,QAAQ,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK;YACzC,MAAM,SAAS,KAAK,CAAC,IAAI,CAAC,KAAK;YAE/B,YAAY,OAAO;QACrB;IACF;AACF;AAEA,SAAS;IACP,IAAK,IAAI,OAAO,GAAG,OAAO,OAAO,OAAQ;QACvC,MAAM,KAAK,MAAM,GAAG,CAAC,CAAA,OAAQ,IAAI,CAAC,KAAK;QACvC,MAAM,gBAAgB,WAAW;QAEjC,IAAK,IAAI,MAAM,GAAG,MAAM,OAAO,MAAO;YACpC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,aAAa,CAAC,IAAI;YAErC,MAAM,QAAQ,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK;YACzC,MAAM,SAAS,KAAK,CAAC,IAAI,CAAC,KAAK;YAE/B,YAAY,OAAO;QACrB;IACF;AACF;AAEA,SAAS;IACP,IAAK,IAAI,OAAO,GAAG,OAAO,OAAO,OAAQ;QACvC,MAAM,KAAK,MAAM,GAAG,CAAC,CAAA,OAAQ,IAAI,CAAC,KAAK,EAAE,OAAO;QAChD,MAAM,gBAAgB,WAAW,IAAI,OAAO;QAE5C,IAAK,IAAI,MAAM,GAAG,MAAM,OAAO,MAAO;YACpC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,aAAa,CAAC,IAAI;YAErC,MAAM,QAAQ,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK;YACzC,MAAM,SAAS,KAAK,CAAC,IAAI,CAAC,KAAK;YAE/B,YAAY,OAAO;QACrB;IACF;AACF;AAEA,MAAM,gBAAgB,CAAC,SAAS;IAC9B,IAAI,MAAM,SAAS,CAAC,QAAQ,CAAC,UAAU;QACrC,MAAM,SAAS,CAAC,MAAM,CAAC;QACvB,MAAM,SAAS,CAAC,GAAG,CAAC;QACpB,MAAM,SAAS,GAAG;QAClB,aAAa,SAAS,CAAC,GAAG,CAAC;QAC3B;IACF;IAEA,IAAI,MAAM,SAAS,CAAC,QAAQ,CAAC,YAAY;QACvC,SAAS,OAAO,CAAC,CAAA,IAAK,YAAY,GAAG;QACrC,YAAY,SAAS,CAAC,GAAG,CAAC;QAC1B,SAAS;QACT,UAAU,SAAS,GAAG;QACtB;IACF;AACF;AAEA,SAAS,gBAAgB,CAAC,WAAW,CAAC;IACpC,IAAI,OAAO,SAAS,KAAK,SACvB;IAGF,OAAQ,EAAE,GAAG;QACX,KAAK;YACH;YACA;YACA;QACF,KAAK;YACH;YACA;YACA;QACF,KAAK;YACH;YACA;YACA;QACF,KAAK;YACH;YACA;YACA;QACF;YACE;IACJ;IAEA,IAAI,CAAC,qBAAqB,CAAC,SACzB,YAAY,SAAS,CAAC,MAAM,CAAC;AAEjC","sources":["src/scripts/main.js"],"sourcesContent":["'use strict';\n\nlet field = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\nconst button = document.querySelector('button');\nconst start = document.querySelector('.start');\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\nconst messageStart = document.querySelector('.message-start');\nconst rowsArr = document.querySelectorAll('.field-row');\nconst cellsArr = document.querySelectorAll('.field-cell');\nconst gameScore = document.querySelector('.game-score');\nconst pointsToWin = 2048;\nconst width = 4;\nlet result = 0;\n\nfunction gameBeginning() {\n  field = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n  launchingRandom();\n  launchingRandom();\n}\n\nfunction empty() {\n  for (let row = 0; row < width; row++) {\n    for (let cell = 0; cell < width; cell++) {\n      if (field[row][cell] === 0) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\nfunction withoutZero(quadrates) {\n  return quadrates.filter(item => item > 0);\n}\n\nconst squareValue = (place, num) => {\n  place.classList = `field-cell--${num} field-cell`;\n\n  if (num === 0) {\n    place.innerText = '';\n  }\n\n  if (num > 0) {\n    place.innerText = num;\n  }\n\n  if (num === pointsToWin) {\n    messageWin.classList.remove('hidden');\n  }\n};\n\nfunction launchingRandom() {\n  if (empty() === false) {\n    return;\n  }\n\n  let noEmptySpaces = false;\n\n  while (noEmptySpaces === false) {\n    const x = Math.floor(Math.random() * width);\n    const y = Math.floor(Math.random() * width);\n\n    if (field[x][y] === 0) {\n      const place = rowsArr[x].children[y];\n\n      if (Math.random() > 0.9) {\n        field[x][y] = 4;\n        squareValue(place, 4);\n      } else {\n        field[x][y] = 2;\n        squareValue(place, 2);\n      }\n\n      noEmptySpaces = true;\n    }\n  }\n}\n\nfunction connection(row) {\n  let arr = withoutZero(row);\n\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i] === arr[i + 1]) {\n      arr[i] += arr[i + 1];\n      arr[i + 1] = 0;\n      result += arr[i];\n    }\n  }\n\n  gameScore.innerHTML = result;\n  arr = withoutZero(arr);\n\n  while (arr.length < width) {\n    arr.push(0);\n  }\n\n  return arr;\n}\n\nfunction invert(items) {\n  return items.map((value, cell) => items.map(row => row[cell]));\n}\n\nfunction checkConnection() {\n  const invertField = invert([...field]);\n\n  for (let row = 0; row < width; row++) {\n    for (let cell = 0; cell < width - 1; cell++) {\n      if (field[row][cell] === field[row][cell + 1]\n      || invertField[row][cell] === invertField[row][cell + 1]) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction moveRight() {\n  for (let row = 0; row < width; row++) {\n    const el = field[row].reverse();\n\n    const elAfterInvert = connection(el).reverse();\n\n    for (let cell = 0; cell < width; cell++) {\n      field[row] = elAfterInvert;\n\n      const place = rowsArr[row].children[cell];\n      const number = field[row][cell];\n\n      squareValue(place, number);\n    }\n  }\n}\n\nfunction moveLeft() {\n  for (let row = 0; row < width; row++) {\n    const el = field[row];\n\n    const elAfterInvert = connection(el);\n\n    for (let cell = 0; cell < width; cell++) {\n      field[row] = elAfterInvert;\n\n      const place = rowsArr[row].children[cell];\n      const number = field[row][cell];\n\n      squareValue(place, number);\n    }\n  }\n}\n\nfunction moveUp() {\n  for (let cell = 0; cell < width; cell++) {\n    const el = field.map(item => item[cell]);\n    const elAfterInvert = connection(el);\n\n    for (let row = 0; row < width; row++) {\n      field[row][cell] = elAfterInvert[row];\n\n      const place = rowsArr[row].children[cell];\n      const number = field[row][cell];\n\n      squareValue(place, number);\n    }\n  }\n}\n\nfunction moveDown() {\n  for (let cell = 0; cell < width; cell++) {\n    const el = field.map(item => item[cell]).reverse();\n    const elAfterInvert = connection(el).reverse();\n\n    for (let row = 0; row < width; row++) {\n      field[row][cell] = elAfterInvert[row];\n\n      const place = rowsArr[row].children[cell];\n      const number = field[row][cell];\n\n      squareValue(place, number);\n    }\n  }\n}\n\nstart.addEventListener('click', () => {\n  if (start.classList.contains('start')) {\n    start.classList.remove('start');\n    start.classList.add('restart');\n    start.innerHTML = 'Restart';\n    messageStart.classList.add('hidden');\n    gameBeginning();\n  }\n\n  if (start.classList.contains('restart')) {\n    cellsArr.forEach(i => squareValue(i, 0));\n    messageLose.classList.add('hidden');\n    result = 0;\n    gameScore.innerHTML = result;\n    gameBeginning();\n  }\n});\n\ndocument.addEventListener('keydown', (e) => {\n  if (button.innerText === 'Start') {\n    return;\n  }\n\n  switch (e.key) {\n    case 'ArrowRight':\n      moveRight();\n      launchingRandom();\n      break;\n    case 'ArrowLeft':\n      moveLeft();\n      launchingRandom();\n      break;\n    case 'ArrowUp':\n      moveUp();\n      launchingRandom();\n      break;\n    case 'ArrowDown':\n      moveDown();\n      launchingRandom();\n      break;\n    default:\n      break;\n  }\n\n  if (!checkConnection() && !empty()) {\n    messageLose.classList.remove('hidden');\n  }\n});\n"],"names":[],"version":3,"file":"index.f75de5e1.js.map","sourceRoot":"/__parcel_source_root/"}