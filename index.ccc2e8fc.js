function r(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],t=document.querySelector("button"),n=document.querySelector(".start"),o=document.querySelector(".message-lose"),a=document.querySelector(".message-win"),i=document.querySelector(".message-start"),c=document.querySelectorAll(".field-row"),u=document.querySelectorAll(".field-cell"),f=document.querySelector(".game-score"),s=0;function l(){e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],h(),h()}function d(){for(var r=0;r<4;r++)for(var t=0;t<4;t++)if(0===e[r][t])return!0;return!1}function m(r){return r.filter(function(r){return r>0})}var v=function(r,e){r.classList="field-cell--".concat(e," field-cell"),0===e&&(r.innerText=""),e>0&&(r.innerText=e),2048===e&&a.classList.remove("hidden")};function h(){if(!1!==d())for(var r=!1;!1===r;){var t=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());if(0===e[t][n]){var o=c[t].children[n];Math.random()>.9?(e[t][n]=4,v(o,4)):(e[t][n]=2,v(o,2)),r=!0}}}function y(r){for(var e=m(r),t=0;t<e.length;t++)e[t]===e[t+1]&&(e[t]+=e[t+1],e[t+1]=0,s+=e[t]);for(f.innerHTML=s,e=m(e);e.length<4;)e.push(0);return e}n.addEventListener("click",function(){n.classList.contains("start")&&(n.classList.remove("start"),n.classList.add("restart"),n.innerHTML="Restart",i.classList.add("hidden"),l()),n.classList.contains("restart")&&(u.forEach(function(r){return v(r,0)}),o.classList.add("hidden"),s=0,f.innerHTML=s,l())}),document.addEventListener("keydown",function(n){if("Start"!==t.innerText){switch(n.key){case"ArrowRight":(function(){for(var r=0;r<4;r++)for(var t=y(e[r].reverse()).reverse(),n=0;n<4;n++)e[r]=t,v(c[r].children[n],e[r][n])})(),h();break;case"ArrowLeft":(function(){for(var r=0;r<4;r++)for(var t=y(e[r]),n=0;n<4;n++)e[r]=t,v(c[r].children[n],e[r][n])})(),h();break;case"ArrowUp":(function(){for(var r=function(r){for(var t=y(e.map(function(e){return e[r]})),n=0;n<4;n++)e[n][r]=t[n],v(c[n].children[r],e[n][r])},t=0;t<4;t++)r(t)})(),h();break;case"ArrowDown":(function(){for(var r=function(r){for(var t=y(e.map(function(e){return e[r]}).reverse()).reverse(),n=0;n<4;n++)e[n][r]=t[n],v(c[n].children[r],e[n][r])},t=0;t<4;t++)r(t)})(),h()}(function(){for(var t,n,o=(n=function(e){if(Array.isArray(e))return r(e)}(t=e)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(t)||function(e,t){if(e){if("string"==typeof e)return r(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(r,e){return n.map(function(r){return r[e]})}),a=0;a<4;a++)for(var i=0;i<3;i++)if(e[a][i]===e[a][i+1]||o[a][i]===o[a][i+1])return!0;return!1})()||d()||o.classList.remove("hidden")}});
//# sourceMappingURL=index.ccc2e8fc.js.map
